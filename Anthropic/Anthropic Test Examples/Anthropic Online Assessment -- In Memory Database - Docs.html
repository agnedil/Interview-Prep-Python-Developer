<!DOCTYPE html>
<!-- saved from url=(0068)https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db -->
<html lang="en" class="h-full antialiased __variable_d5aa53 __variable_79ae9f light" style="color-scheme: light;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="preload" as="font" href="https://aonecode.com/iq/_next/static/media/8935352d0bfcf3a9-s.p.woff2" crossorigin="" type="font/woff2"><link rel="preload" as="font" href="https://aonecode.com/iq/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2" crossorigin="" type="font/woff2"><link rel="preload" as="image" href="./Anthropic Online Assessment -- In Memory Database - Docs_files/712-logotry2.png"><link rel="stylesheet" href="./Anthropic Online Assessment -- In Memory Database - Docs_files/43cd37cca94913c8.css" data-precedence="next"><link rel="preload" href="./Anthropic Online Assessment -- In Memory Database - Docs_files/webpack-7f841aea525824b5.js" as="script" fetchpriority="low"><script async="" src="./Anthropic Online Assessment -- In Memory Database - Docs_files/fd9d1056-baf1976a5f5e4a49.js" type="text/javascript"></script><script async="" src="./Anthropic Online Assessment -- In Memory Database - Docs_files/596-4dc809fa6b1988f3.js" type="text/javascript"></script><script async="" src="./Anthropic Online Assessment -- In Memory Database - Docs_files/main-app-7c93a85c767c19be.js" type="text/javascript"></script><script src="./Anthropic Online Assessment -- In Memory Database - Docs_files/polyfills-78c92fac7aa8fdd8.js" nomodule="" type="text/javascript"></script><title>Anthropic Online Assessment -- In Memory Database - Docs</title><meta name="description" content="Anthropic Online Assessment Question 2024 -- In Memory Database"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="https://aonecode.com/iq/favicon.ico" type="image/x-icon" sizes="16x16"><meta name="next-size-adjust"></head><body class="flex min-h-full bg-white dark:bg-slate-900"><script type="text/javascript">!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="flex w-full flex-col"><header class="sticky top-0 z-50 flex flex-none flex-wrap items-center justify-between bg-white px-3 py-2 shadow-md shadow-slate-900/5 transition duration-500 dark:shadow-none sm:px-6 lg:px-8 dark:bg-transparent"><div class="mr-6 flex lg:hidden"></div><div class="relative flex flex-grow basis-0 items-center"><a aria-label="Home page" href="https://aonecode.com/"><img class="max-h-10" src="./Anthropic Online Assessment -- In Memory Database - Docs_files/712-logotry2.png" alt="Logo"></a><div class="ml-12"><div class="relative" data-headlessui-state=""><button class="inline-flex items-center gap-x-1 text-sm font-semibold leading-6" type="button" aria-expanded="false" data-headlessui-state="" id="headlessui-popover-button-:Rb9la:"><span>Courses</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-5 w-5"><path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg></button></div><div hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div></div><div class="ml-8"><div class="relative" data-headlessui-state=""><button class="inline-flex items-center gap-x-1 text-sm font-semibold leading-6" type="button" aria-expanded="false" data-headlessui-state="" id="headlessui-popover-button-:Rbpla:"><span>Interview Questions</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-5 w-5"><path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path></svg></button></div><div hidden="" style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div></div></div><div class="relative flex basis-0 justify-end gap-6 sm:gap-8 md:flex-grow"><div class="relative z-10" data-headlessui-state=""><label class="sr-only" id="headlessui-listbox-label-:r0:" data-headlessui-state="">Theme</label><button class="flex h-6 w-6 items-center justify-center rounded-lg shadow-md shadow-black/5 ring-1 ring-black/5 dark:bg-slate-700 dark:ring-inset dark:ring-white/5" aria-label="Theme" id="headlessui-listbox-button-:r1:" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state="" aria-labelledby="headlessui-listbox-label-:r0: headlessui-listbox-button-:r1:"><svg aria-hidden="true" viewBox="0 0 16 16" class="h-4 w-4 dark:hidden fill-slate-400"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 1a1 1 0 0 1 2 0v1a1 1 0 1 1-2 0V1Zm4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm2.657-5.657a1 1 0 0 0-1.414 0l-.707.707a1 1 0 0 0 1.414 1.414l.707-.707a1 1 0 0 0 0-1.414Zm-1.415 11.313-.707-.707a1 1 0 0 1 1.415-1.415l.707.708a1 1 0 0 1-1.415 1.414ZM16 7.999a1 1 0 0 0-1-1h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 1-1ZM7 14a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1Zm-2.536-2.464a1 1 0 0 0-1.414 0l-.707.707a1 1 0 0 0 1.414 1.414l.707-.707a1 1 0 0 0 0-1.414Zm0-8.486A1 1 0 0 1 3.05 4.464l-.707-.707a1 1 0 0 1 1.414-1.414l.707.707ZM3 8a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Z"></path></svg><svg aria-hidden="true" viewBox="0 0 16 16" class="hidden h-4 w-4 dark:block fill-slate-400"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.23 3.333C7.757 2.905 7.68 2 7 2a6 6 0 1 0 0 12c.68 0 .758-.905.23-1.332A5.989 5.989 0 0 1 5 8c0-1.885.87-3.568 2.23-4.668ZM12 5a1 1 0 0 1 1 1 1 1 0 0 0 1 1 1 1 0 1 1 0 2 1 1 0 0 0-1 1 1 1 0 1 1-2 0 1 1 0 0 0-1-1 1 1 0 1 1 0-2 1 1 0 0 0 1-1 1 1 0 0 1 1-1Z"></path></svg></button></div></div></header><div class="relative mx-auto flex w-full flex-auto justify-center sm:px-2 lg:px-8 xl:px-12"><div class="hidden lg:relative lg:block lg:flex-none"><div class="absolute inset-y-0 right-0 w-[50vw] bg-slate-50 dark:hidden"></div><div class="absolute bottom-0 right-0 top-16 hidden h-12 w-px bg-gradient-to-t from-slate-800 dark:block"></div><div class="absolute bottom-0 right-0 top-28 hidden w-px bg-slate-800 dark:block"></div><div class="sticky top-[4.75rem] -ml-0.5 h-[calc(100vh-4.75rem)] w-72 overflow-y-auto overflow-x-hidden py-8 pl-0.5 pr-8 xl:w-80 xl:pr-4"><h2 class="w-full max-w-full mb-4 text-xl font-extrabold text-gray-900 dark:text-white md:text-xl lg:text-xl"><span class="block w-full text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">Anthropic Online Assessment Questions 2025</span></h2><nav class="text-base lg:text-sm"><ul role="list" class="space-y-9"><li><h2 class="font-display font-medium text-slate-900 dark:text-white">Anthropic OA 2025</h2><ul role="list" class="mt-2 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200"><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/how-it-works">How It Works</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/cloud-storage-system">Cloud Storage System</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full font-semibold text-sky-500 before:bg-sky-500" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db">In Memory Database</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db">Coming Soon</a></li></ul></li></ul></nav></div></div><div class="min-w-0 max-w-2xl flex-auto px-4 py-16 lg:max-w-none lg:pl-8 lg:pr-0 xl:px-16"><article><header class="mb-9 space-y-1"><h1 class="font-display text-3xl tracking-tight text-slate-900 dark:text-white">Anthropic Online Assessment -- In Memory Database</h1></header><div class="prose prose-slate max-w-none dark:prose-invert dark:text-slate-400 prose-headings:scroll-mt-28 prose-headings:font-display prose-headings:font-normal lg:prose-headings:scroll-mt-[8.5rem] prose-lead:text-slate-500 dark:prose-lead:text-slate-400 prose-a:font-semibold dark:prose-a:text-sky-400 prose-a:no-underline prose-a:shadow-[inset_0_-2px_0_0_var(--tw-prose-background,#fff),inset_0_calc(-1*(var(--tw-prose-underline-size,4px)+2px))_0_0_var(--tw-prose-underline,theme(colors.sky.300))] hover:prose-a:[--tw-prose-underline-size:6px] dark:[--tw-prose-background:theme(colors.slate.900)] dark:prose-a:shadow-[inset_0_calc(-1*var(--tw-prose-underline-size,2px))_0_0_var(--tw-prose-underline,theme(colors.sky.800))] dark:hover:prose-a:[--tw-prose-underline-size:6px] prose-pre:rounded-xl prose-pre:bg-slate-900 prose-pre:shadow-lg dark:prose-pre:bg-slate-800/60 dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-slate-300/10 dark:prose-hr:border-slate-800"><h2 id="requirements">Requirements</h2><p>Your task is to implement a simplified version of an in-memory database. Plan your design according to the level specifications below:</p><ul><li>Level 1: In-memory database should support basic operations to manipulate records, fields, and values within fields.</li><li>Level 2: In-memory database should support displaying a specific record's fields based on a filter.</li><li>Level 3: In-memory database should support TTL (Time-To-Live) configurations on database records.</li><li>Level 4: In-memory database should support backup and restore functionality. To move to the next level, you need to pass all the tests at this level.</li></ul><p>Note You will receive a list of queries to the system, and the final output should be an array of strings representing the returned values of all queries. Each query will only call one operation.</p><h2 id="level-1">Level 1</h2><p>The basic level of the in-memory database contains records. Each record can be accessed with a unique identifier key of string type. A record may contain several field-value pairs, both of which are of string type.</p><ul><li>SET &lt;key&gt; &lt;field&gt; &lt;value&gt; — should insert a field-value pair to the record associated with key. If the field in the record already exists, replace the existing value with the specified value. If the record does not exist, create a new one. This operation should return an empty string.</li><li>GET &lt;key&gt; &lt;field&gt; — should return the value contained within field of the record associated with key. If the record or the field doesn't exist, should return an empty string.</li><li>DELETE &lt;key&gt; &lt;field&gt; — should remove the field from the record associated with key. Returns   if the field was successfully deleted, and "false" if the key or the field do not exist in the database.</li></ul><h3 id="examples">Examples</h3><p>The example below shows how these operations should work:</p><pre class="prism-code language-js"><code><span class="token maybe-class-name">Queries</span><span class="token plain"></span>

<span class="token plain">queries </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"GET"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"D"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"DELETE"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"DELETE"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"D"</span><span class="token punctuation">]</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">]</span>
</code></pre><pre class="prism-code language-js"><code><span class="token maybe-class-name">Explanations</span><span class="token plain"></span>

<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"C"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">"E"</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">"true"</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"C"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">"false"</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"C"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><h2 id="level-2">Level 2</h2><p>The database should support displaying data based on filters. Introduce an operation to support printing some fields of a record.</p><ul><li>SCAN &lt;key&gt; — should return a string representing the fields of a record associated with key. The returned string should be in the following format "&lt;field1&gt;(&lt;value1&gt;), &lt;field2&gt;(&lt;value2&gt;), ...", where fields are sorted lexicographically. If the specified record does not exist, returns an empty string.</li><li>SCAN_BY_PREFIX &lt;key&gt; &lt;prefix&gt; — should return a string representing some fields of a record associated with key. Specifically, only fields that start with prefix should be included. The returned string should be in the same format as in the SCAN operation with fields sorted in lexicographical order.</li></ul><h3 id="examples-2">Examples</h3><p>The example below shows how these operations should work</p><pre class="prism-code language-js"><code><span class="token maybe-class-name">Queries</span><span class="token plain"></span>

<span class="token plain">queries </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"BC"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"BD"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"G"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_BY_PREFIX"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_BY_PREFIX"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token punctuation">]</span>
</code></pre><pre class="prism-code language-js"><code><span class="token maybe-class-name">Explanations</span><span class="token plain"></span>

<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"BD"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"BD"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"C"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"G"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">"BC(E), BD(F)"</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">"BC(E), BD(F), C(G)"</span><span class="token plain"></span>
<span class="token plain">returns </span><span class="token string">""</span>
</code></pre><p>the output should be ["", "", "", "BC(E), BD(F)", "BC(E), BD(F), C(G)", ""].</p><h2 id="level-3">Level 3</h2><p>Support the timeline of operations and TTL (Time-To-Live) settings for records and fields. Each operation from previous levels now has an alternative version with a timestamp parameter to represent when the operation was executed. For each field-value pair in the database, the TTL determines how long that value will persist before being removed. Notes:</p><ul><li>Time should always flow forward, so timestamps are guaranteed to strictly increase as operations are executed.</li><li>Each test cannot contain both versions of operations (with and without timestamp). However, you should maintain backward compatibility, so all previously defined methods should work in the same way as before.</li><li>SET_AT &lt;key&gt; &lt;field&gt; &lt;value&gt; &lt;timestamp&gt; — should insert a field-value pair or updates the value of the field in the record associated with key. This operation should return an empty string.</li><li>SET_AT_WITH_TTL &lt;key&gt; &lt;field&gt; &lt;value&gt; &lt;timestamp&gt; &lt;ttl&gt; — should insert a field-value pair or update the value of the field in the record associated with key. Also sets its Time-To-Live starting at timestamp to be ttl. The ttl is the amount of time that this field-value pair should exist in the database, meaning it will be available during this interval: [timestamp, timestamp + ttl). This operation should return an empty string.</li><li>DELETE_AT &lt;key&gt; &lt;field&gt; &lt;timestamp&gt; — the same as DELETE, but with timestamp of the operation specified. Should return "true" if the field existed and was successfully deleted and "false" if the key didn't exist.</li><li>GET_AT &lt;key&gt; &lt;field&gt; &lt;timestamp&gt; — the same as GET, but with timestamp of the operation specified.</li><li>SCAN_AT &lt;key&gt; &lt;timestamp&gt; — the same as SCAN, but with timestamp of the operation specified.</li><li>SCAN_BY_PREFIX_AT &lt;key&gt; &lt;prefix&gt; &lt;timestamp&gt; — the same as SCAN_BY_PREFIX, but with timestamp of the operation specified.</li></ul><h3 id="examples-3">Examples</h3><p>The examples below show how these operations should work</p><pre class="prism-code language-js"><code><span class="token maybe-class-name">Queries</span><span class="token plain"></span>

<span class="token plain">queries </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET_AT_WITH_TTL"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"BC"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"9"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET_AT_WITH_TTL"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"BC"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"10"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"BD"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"5"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_BY_PREFIX_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"14"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_BY_PREFIX_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"15"</span><span class="token punctuation">]</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">]</span>
</code></pre><pre class="prism-code language-js"><code><span class="token maybe-class-name">Explanations</span><span class="token plain"></span>

<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> </span>
<span class="token plain">where </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token plain"> expires at timestamp </span><span class="token number">10</span><span class="token plain"> returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token keyword module">as</span><span class="token plain"> field </span><span class="token string">"BC"</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> record </span><span class="token string">"A"</span><span class="token plain"> already </span>
<span class="token plain">exists</span><span class="token punctuation">,</span><span class="token plain"> it was overwritten</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain">and </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token plain"> now expires at timestamp </span><span class="token number">15</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"BC"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token constant">E</span><span class="token string">", "</span><span class="token constant">BD</span><span class="token string">": "</span><span class="token constant">F</span><span class="token plain">"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> </span>
<span class="token plain">where </span><span class="token punctuation">{</span><span class="token string-property property">"BD"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"F"</span><span class="token punctuation">}</span><span class="token plain"> does not expire </span>
<span class="token plain">returns </span><span class="token string">"BC(E), BD(F)"</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">"BD(F)"</span>
</code></pre><p>the output should be ["", "", "", "BC(E), BD(F)", "BD(F)"].</p><h3 id="example2">Example2</h3><pre class="prism-code language-js"><code><span class="token maybe-class-name">Queries</span><span class="token plain"></span>

<span class="token plain">queries </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token string">"1"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET_AT_WITH_TTL"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"Z"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"2"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"15"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"GET_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">"SET_AT_WITH_TTL"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"4"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"10"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"13"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"16"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"17"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"DELETE_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token string">"20"</span><span class="token punctuation">]</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">]</span>
</code></pre><pre class="prism-code language-js"><code><span class="token maybe-class-name">Explanations</span><span class="token plain"></span>

<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"X"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"Y"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"Z"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> </span>
<span class="token plain">where </span><span class="token punctuation">{</span><span class="token string-property property">"Y"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"Z"</span><span class="token punctuation">}</span><span class="token plain"> expires at timestamp </span><span class="token number">17</span><span class="token plain"> returns </span><span class="token string">"Z"</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">{</span><span class="token string-property property">"X"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"Y"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"Z"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"D"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> where </span><span class="token punctuation">{</span><span class="token string-property property">"D"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token plain"> expires at timestamp </span><span class="token number">14</span><span class="token plain"> and </span><span class="token punctuation">{</span><span class="token string-property property">"Y"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"Z"</span><span class="token punctuation">}</span><span class="token plain"> expires at timestamp </span><span class="token number">17</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">"B(C), D(E)"</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">"Y(Z)"</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token maybe-class-name">Note</span><span class="token plain"> that all fields </span><span class="token keyword">in</span><span class="token plain"> record </span><span class="token string">"X"</span><span class="token plain"> have expired </span>
<span class="token plain">returns </span><span class="token string">"false"</span><span class="token punctuation">;</span><span class="token plain"> the record </span><span class="token string">"X"</span><span class="token plain"> was expired at timestamp </span><span class="token number">17</span><span class="token plain"> and can't be deleted</span><span class="token punctuation">.</span>
</code></pre><p>the output should be ["", "", "Z", "", "B(C), D(E)", "Y(Z)", "", "false"].</p><h2 id="level-4">Level 4</h2><p>The database should be backed up from time to time. Introduce operations to support backing up and restoring the database state based on timestamps. When restoring, ttl expiration times should be recalculated accordingly.</p><ul><li>BACKUP &lt;timestamp&gt; — should save the database state at the specified timestamp, including the remaining ttl for all records and fields. Remaining ttl is the difference between their initial ttl and their current lifespan (the duration between the timestamp of this operation and their initial timestamp). Returns a string representing the number of non-empty non-expired records in the database.</li><li>RESTORE &lt;timestamp&gt; &lt;timestampToRestore&gt; — should restore the database from the latest backup before or at timestampToRestore. It's guaranteed that a backup before or at timestampToRestore will exist. Expiration times for restored records and fields should be recalculated according to the timestamp of this operation - since the database timeline always flows forward, restored records and fields should expire after the timestamp of this operation, depending on their remaining ttls at backup. This operation should return an empty string.</li></ul><h3 id="examples-4">Examples</h3><pre class="prism-code language-js"><code><span class="token maybe-class-name">Queries</span><span class="token plain"></span>

<span class="token plain">queries </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET_AT_WITH_TTL"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"10"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"BACKUP"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"3"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SET_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"4"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"BACKUP"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"5"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"DELETE_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token string">"8"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"BACKUP"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"9"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"RESTORE"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"10"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"7"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"BACKUP"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"11"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"15"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">[</span><span class="token string">"SCAN_AT"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">"16"</span><span class="token punctuation">]</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">]</span>
</code></pre><pre class="prism-code language-js"><code><span class="token maybe-class-name">Explanations</span><span class="token plain"></span>

<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">with</span><span class="token plain"> lifespan </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">[1, 11)</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> meaning that the record should be deleted at timestamp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">11.</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">"1"</span><span class="token punctuation">;</span><span class="token plain"> saves the database state </span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"D"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">"1"</span><span class="token punctuation">;</span><span class="token plain"> saves the database state </span>
<span class="token plain">returns </span><span class="token string">"true"</span><span class="token punctuation">;</span><span class="token plain"> database state</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"D"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> returns </span><span class="token string">"1"</span><span class="token punctuation">;</span><span class="token plain"> saves the database state </span>
<span class="token plain">returns </span><span class="token string">""</span><span class="token punctuation">;</span><span class="token plain"> restores the database to state </span><span class="token keyword">of</span><span class="token plain"> last backup at timestamp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">5</span><span class="token operator">:</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token punctuation">{</span><span class="token string-property property">"A"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"D"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain"> </span>
<span class="token plain"></span><span class="token keyword">with</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token string-property property">"B"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"C"</span><span class="token punctuation">}</span><span class="token plain"> expiring at timestamp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">16</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">Since</span><span class="token plain"> the initial ttl </span><span class="token keyword">of</span><span class="token plain"> the field is </span><span class="token number">10</span><span class="token plain"> </span>
<span class="token plain">and the database was restored to the state at timestamp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token plain"> field has had </span>
<span class="token plain">a lifespan </span><span class="token keyword">of</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> and a remaining ttl </span><span class="token keyword">of</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation">,</span><span class="token plain"> so it will now expire at timestamp </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">16.</span><span class="token plain"> returns </span><span class="token string">"1"</span><span class="token punctuation">;</span><span class="token plain"> saves the database state </span>
<span class="token plain">returns </span><span class="token string">"B(C), D(E)"</span><span class="token plain"> </span>
<span class="token plain">returns </span><span class="token string">"D(E)"</span>
</code></pre><p>the output should be ["", "1", "", "1", "true", "1", "", "1", "B(C), D(E)", "D(E)"].</p></div></article></div><div class="hidden xl:sticky xl:top-[.75rem] xl:-mr-6 xl:block xl:h-[calc(100vh-4.75rem)] xl:flex-none xl:overflow-y-auto xl:py-16 xl:pr-6"><nav aria-labelledby="on-this-page-title" class="w-56"><h2 id="on-this-page-title" class="font-display text-sm font-medium text-slate-900 dark:text-white">On this page</h2><ol role="list" class="mt-4 space-y-3 text-sm"><li><h3><a class="text-sky-500" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#requirements">Requirements</a></h3></li><li><h3><a class="font-normal text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#level-1">Level 1</a></h3><ol role="list" class="mt-2 space-y-3 pl-5 text-slate-500 dark:text-slate-400"><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#examples">Examples</a></li></ol></li><li><h3><a class="font-normal text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#level-2">Level 2</a></h3><ol role="list" class="mt-2 space-y-3 pl-5 text-slate-500 dark:text-slate-400"><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#examples-2">Examples</a></li></ol></li><li><h3><a class="font-normal text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#level-3">Level 3</a></h3><ol role="list" class="mt-2 space-y-3 pl-5 text-slate-500 dark:text-slate-400"><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#examples-3">Examples</a></li><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#example2">Example2</a></li></ol></li><li><h3><a class="font-normal text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#level-4">Level 4</a></h3><ol role="list" class="mt-2 space-y-3 pl-5 text-slate-500 dark:text-slate-400"><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="https://aonecode.com/iq/docs/antropic/online-assessment/in-memory-db#examples-4">Examples</a></li></ol></li></ol></nav></div></div></div><script async="" src="./Anthropic Online Assessment -- In Memory Database - Docs_files/webpack-7f841aea525824b5.js" type="text/javascript"></script><script type="text/javascript">(self.__next_f=self.__next_f||[]).push([0])</script><script type="text/javascript">self.__next_f.push([1,"1:HL[\"/iq/_next/static/media/8935352d0bfcf3a9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/iq/_next/static/media/c9a5bc6a7c948fb0-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n3:HL[\"/iq/_next/static/css/43cd37cca94913c8.css\",{\"as\":\"style\"}]\n0:\"$L4\"\n"])</script><script type="text/javascript">self.__next_f.push([1,"5:I{\"id\":7948,\"chunks\":[\"2272:static/chunks/webpack-7f841aea525824b5.js\",\"2971:static/chunks/fd9d1056-baf1976a5f5e4a49.js\",\"596:static/chunks/596-4dc809fa6b1988f3.js\"],\"name\":\"default\",\"async\":false}\n7:I{\"id\":6628,\"chunks\":[\"2272:static/chunks/webpack-7f841aea525824b5.js\",\"2971:static/chunks/fd9d1056-baf1976a5f5e4a49.js\",\"596:static/chunks/596-4dc809fa6b1988f3.js\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":1431,\"chunks\":[\"6685:static/chunks/6685-dd5a15501f3f28f3.js\",\"4156:static/chunks/4156-76f9b37de36422b9.js\",\"63"])</script><script type="text/javascript">self.__next_f.push([1,"70:static/chunks/6370-69c140d5a2b5acec.js\",\"3185:static/chunks/app/layout-d4c25cb768b1f685.js\"],\"name\":\"Providers\",\"async\":false}\n9:I{\"id\":1277,\"chunks\":[\"6685:static/chunks/6685-dd5a15501f3f28f3.js\",\"4156:static/chunks/4156-76f9b37de36422b9.js\",\"6370:static/chunks/6370-69c140d5a2b5acec.js\",\"3185:static/chunks/app/layout-d4c25cb768b1f685.js\"],\"name\":\"Layout\",\"async\":false}\na:I{\"id\":7767,\"chunks\":[\"2272:static/chunks/webpack-7f841aea525824b5.js\",\"2971:static/chunks/fd9d1056-baf1976a5f5e4a49.js\",\"596:static/c"])</script><script type="text/javascript">self.__next_f.push([1,"hunks/596-4dc809fa6b1988f3.js\"],\"name\":\"default\",\"async\":false}\nb:I{\"id\":7920,\"chunks\":[\"2272:static/chunks/webpack-7f841aea525824b5.js\",\"2971:static/chunks/fd9d1056-baf1976a5f5e4a49.js\",\"596:static/chunks/596-4dc809fa6b1988f3.js\"],\"name\":\"default\",\"async\":false}\nc:I{\"id\":6685,\"chunks\":[\"6685:static/chunks/6685-dd5a15501f3f28f3.js\",\"4156:static/chunks/4156-76f9b37de36422b9.js\",\"591:static/chunks/591-cb6e7fbadd62e865.js\",\"2487:static/chunks/app/docs/antropic/online-assessment/in-memory-db/page-51251a0d436127"])</script><script type="text/javascript">self.__next_f.push([1,"9e.js\"],\"name\":\"\",\"async\":false}\n"])</script><script type="text/javascript">self.__next_f.push([1,"4:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/iq/_next/static/css/43cd37cca94913c8.css\",\"precedence\":\"next\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"pfCM6Dmz9TvjdnoTu3Nl4\",\"assetPrefix\":\"/iq\",\"initialCanonicalUrl\":\"/docs/antropic/online-assessment/in-memory-db\",\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[\"antropic\",{\"children\":[\"online-assessment\",{\"children\":[\"in-memory-db\",{\"children\":[\"__PAGE__\",{}]}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L6\",\"globalErrorComponent\":\"$7\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"h-full antialiased __variable_d5aa53 __variable_79ae9f\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"flex min-h-full bg-white dark:bg-slate-900\",\"children\":[\"$\",\"$L8\",null,{\"children\":[\"$\",\"$L9\",null,{\"children\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"min-w-0 max-w-2xl flex-auto px-4 py-16 lg:max-w-none lg:pl-8 lg:pr-0 xl:px-16\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex h-full flex-col items-center justify-center text-center\",\"children\":[[\"$\",\"p\",null,{\"className\":\"font-display text-sm font-medium text-slate-900 dark:text-white\",\"children\":\"404\"}],[\"$\",\"h1\",null,{\"className\":\"mt-3 font-display text-3xl tracking-tight text-slate-900 dark:text-white\",\"children\":\"Page not found\"}],[\"$\",\"p\",null,{\"className\":\"mt-2 text-sm text-slate-500 dark:text-slate-400\",\"children\":\"Sorry, we couldn’t find the page you’re looking for.\"}],[\"$\",\"$Lc\",null,{\"href\":\"/\",\"className\":\"mt-8 text-sm font-medium text-slate-900 dark:text-white\",\"children\":\"Go back home\"}]]}]}],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"antropic\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"antropic\",\"children\",\"online-assessment\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"antropic\",\"children\",\"online-assessment\",\"children\",\"in-memory-db\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Ld\",\"$Le\",null],\"segment\":\"__PAGE__\"},\"styles\":[]}],\"segment\":\"in-memory-db\"},\"styles\":[]}],\"segment\":\"online-assessment\"},\"styles\":[]}],\"segment\":\"antropic\"},\"styles\":[]}],\"segment\":\"docs\"},\"styles\":[]}]}]}]}]}],null]}]]\n"])</script><script type="text/javascript">self.__next_f.push([1,"f:I{\"id\":4663,\"chunks\":[\"6685:static/chunks/6685-dd5a15501f3f28f3.js\",\"4156:static/chunks/4156-76f9b37de36422b9.js\",\"591:static/chunks/591-cb6e7fbadd62e865.js\",\"2487:static/chunks/app/docs/antropic/online-assessment/in-memory-db/page-51251a0d4361279e.js\"],\"name\":\"DocsHeader\",\"async\":false}\n10:I{\"id\":4412,\"chunks\":[\"6685:static/chunks/6685-dd5a15501f3f28f3.js\",\"4156:static/chunks/4156-76f9b37de36422b9.js\",\"591:static/chunks/591-cb6e7fbadd62e865.js\",\"2487:static/chunks/app/docs/antropic/online-assessment/in-m"])</script><script type="text/javascript">self.__next_f.push([1,"emory-db/page-51251a0d4361279e.js\"],\"name\":\"Fence\",\"async\":false}\n11:I{\"id\":7110,\"chunks\":[\"6685:static/chunks/6685-dd5a15501f3f28f3.js\",\"4156:static/chunks/4156-76f9b37de36422b9.js\",\"591:static/chunks/591-cb6e7fbadd62e865.js\",\"2487:static/chunks/app/docs/antropic/online-assessment/in-memory-db/page-51251a0d4361279e.js\"],\"name\":\"TableOfContents\",\"async\":false}\n"])</script><script type="text/javascript">self.__next_f.push([1,"e:[[\"$\",\"div\",null,{\"className\":\"min-w-0 max-w-2xl flex-auto px-4 py-16 lg:max-w-none lg:pl-8 lg:pr-0 xl:px-16\",\"children\":[\"$\",\"article\",null,{\"children\":[[\"$\",\"$Lf\",null,{\"title\":\"Anthropic Online Assessment -- In Memory Database\"}],[\"$\",\"div\",null,{\"className\":\"prose prose-slate max-w-none dark:prose-invert dark:text-slate-400 prose-headings:scroll-mt-28 prose-headings:font-display prose-headings:font-normal lg:prose-headings:scroll-mt-[8.5rem] prose-lead:text-slate-500 dark:prose-lead:text-slate-400 prose-a:font-semibold dark:prose-a:text-sky-400 prose-a:no-underline prose-a:shadow-[inset_0_-2px_0_0_var(--tw-prose-background,#fff),inset_0_calc(-1*(var(--tw-prose-underline-size,4px)+2px))_0_0_var(--tw-prose-underline,theme(colors.sky.300))] hover:prose-a:[--tw-prose-underline-size:6px] dark:[--tw-prose-background:theme(colors.slate.900)] dark:prose-a:shadow-[inset_0_calc(-1*var(--tw-prose-underline-size,2px))_0_0_var(--tw-prose-underline,theme(colors.sky.800))] dark:hover:prose-a:[--tw-prose-underline-size:6px] prose-pre:rounded-xl prose-pre:bg-slate-900 prose-pre:shadow-lg dark:prose-pre:bg-slate-800/60 dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-slate-300/10 dark:prose-hr:border-slate-800\",\"children\":[[\"$\",\"h2\",null,{\"id\":\"requirements\",\"children\":\"Requirements\"}],[\"$\",\"p\",null,{\"children\":\"Your task is to implement a simplified version of an in-memory database. Plan your design according to the level specifications below:\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"Level 1: In-memory database should support basic operations to manipulate records, fields, and values within fields.\"}],[\"$\",\"li\",null,{\"children\":\"Level 2: In-memory database should support displaying a specific record's fields based on a filter.\"}],[\"$\",\"li\",null,{\"children\":\"Level 3: In-memory database should support TTL (Time-To-Live) configurations on database records.\"}],[\"$\",\"li\",null,{\"children\":\"Level 4: In-memory database should support backup and restore functionality. To move to the next level, you need to pass all the tests at this level.\"}]]}],[\"$\",\"p\",null,{\"children\":[\"Note\",\" \",\"You will receive a list of queries to the system, and the final output should be an array of strings representing the returned values of all queries. Each query will only call one operation.\"]}],[\"$\",\"h2\",null,{\"id\":\"level-1\",\"children\":\"Level 1\"}],[\"$\",\"p\",null,{\"children\":\"The basic level of the in-memory database contains records. Each record can be accessed with a unique identifier key of string type. A record may contain several field-value pairs, both of which are of string type.\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"SET \u003ckey\u003e \u003cfield\u003e \u003cvalue\u003e — should insert a field-value pair to the record associated with key. If the field in the record already exists, replace the existing value with the specified value. If the record does not exist, create a new one. This operation should return an empty string.\"}],[\"$\",\"li\",null,{\"children\":\"GET \u003ckey\u003e \u003cfield\u003e — should return the value contained within field of the record associated with key. If the record or the field doesn't exist, should return an empty string.\"}],[\"$\",\"li\",null,{\"children\":[\"DELETE \u003ckey\u003e \u003cfield\u003e — should remove the field from the record associated with key. Returns   if the field was successfully deleted, and \\\"false\\\" if the key or the field do\",\" \",\"not exist in the database.\"]}]]}],[\"$\",\"h3\",null,{\"id\":\"examples\",\"children\":\"Examples\"}],[\"$\",\"p\",null,{\"children\":\"The example below shows how these operations should work:\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Queries\\n\\nqueries = [\\n[\\\"SET\\\", \\\"A\\\", \\\"B\\\", \\\"E\\\"],\\n[\\\"SET\\\", \\\"A\\\", \\\"C\\\", \\\"F\\\"],\\n[\\\"GET\\\", \\\"A\\\", \\\"B\\\"],\\n[\\\"GET\\\", \\\"A\\\", \\\"D\\\"],\\n[\\\"DELETE\\\", \\\"A\\\", \\\"B\\\"],\\n[\\\"DELETE\\\", \\\"A\\\", \\\"D\\\"]\\n]\\n\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Explanations\\n\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"B\\\": \\\"E\\\"}}\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"C\\\": \\\"F\\\", \\\"B\\\":\\\"E\\\"}}\\nreturns \\\"E\\\"\\nreturns \\\"\\\"\\nreturns \\\"true\\\"; database state: {\\\"A\\\": {\\\"C\\\": \\\"F\\\"}}\\nreturns \\\"false\\\"; database state: {\\\"A\\\": {\\\"C\\\": \\\"F\\\"}}  \\n\"}],[\"$\",\"h2\",null,{\"id\":\"level-2\",\"children\":\"Level 2\"}],[\"$\",\"p\",null,{\"children\":\"The database should support displaying data based on filters. Introduce an operation to support printing some fields of a record.\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"SCAN \u003ckey\u003e — should return a string representing the fields of a record associated with key. The returned string should be in the following format \\\"\u003cfield1\u003e(\u003cvalue1\u003e), \u003cfield2\u003e(\u003cvalue2\u003e), ...\\\", where fields are sorted lexicographically. If the specified record does not exist, returns an empty string.\"}],[\"$\",\"li\",null,{\"children\":\"SCAN_BY_PREFIX \u003ckey\u003e \u003cprefix\u003e — should return a string representing some fields of a record associated with key. Specifically, only fields that start with prefix should be included. The returned string should be in the same format as in the SCAN operation with fields sorted in lexicographical order.\"}]]}],[\"$\",\"h3\",null,{\"id\":\"examples-2\",\"children\":\"Examples\"}],[\"$\",\"p\",null,{\"children\":\"The example below shows how these operations should work\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Queries\\n\\nqueries = [\\n[\\\"SET\\\", \\\"A\\\", \\\"BC\\\", \\\"E\\\"],\\n[\\\"SET\\\", \\\"A\\\", \\\"BD\\\", \\\"F\\\"],\\n[\\\"SET\\\", \\\"A\\\", \\\"C\\\", \\\"G\\\"],\\n[\\\"SCAN_BY_PREFIX\\\", \\\"A\\\", \\\"B\\\"],\\n[\\\"SCAN\\\", \\\"A\\\"],\\n[\\\"SCAN_BY_PREFIX\\\", \\\"B\\\", \\\"B\\\"] ]\\n\\n\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Explanations\\n\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"BC\\\": \\\"E\\\"}}\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"BC\\\": \\\"E\\\", \\\"BD\\\": \\\"F\\\"}}\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"BC\\\": \\\"E\\\", \\\"BD\\\": \\\"F\\\", \\\"C\\\": \\\"G\\\"}}\\nreturns \\\"BC(E), BD(F)\\\"\\nreturns \\\"BC(E), BD(F), C(G)\\\"\\nreturns \\\"\\\"\\n\\n\"}],[\"$\",\"p\",null,{\"children\":\"the output should be [\\\"\\\", \\\"\\\", \\\"\\\", \\\"BC(E), BD(F)\\\", \\\"BC(E), BD(F), C(G)\\\", \\\"\\\"].\"}],[\"$\",\"h2\",null,{\"id\":\"level-3\",\"children\":\"Level 3\"}],[\"$\",\"p\",null,{\"children\":[\"Support the timeline of operations and TTL (Time-To-Live) settings for records and fields. Each operation from previous levels now has an alternative version with a timestamp parameter to represent when the operation was executed. For each field-value pair in the database, the TTL determines how long that value will persist before being removed.\",\" \",\"Notes:\"]}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"Time should always flow forward, so timestamps are guaranteed to strictly increase as operations are executed.\"}],[\"$\",\"li\",null,{\"children\":\"Each test cannot contain both versions of operations (with and without timestamp). However, you should maintain backward compatibility, so all previously defined methods should work in the same way as before.\"}],[\"$\",\"li\",null,{\"children\":\"SET_AT \u003ckey\u003e \u003cfield\u003e \u003cvalue\u003e \u003ctimestamp\u003e — should insert a field-value pair or updates the value of the field in the record associated with key. This operation should return an empty string.\"}],[\"$\",\"li\",null,{\"children\":\"SET_AT_WITH_TTL \u003ckey\u003e \u003cfield\u003e \u003cvalue\u003e \u003ctimestamp\u003e \u003cttl\u003e — should insert a field-value pair or update the value of the field in the record associated with key. Also sets its Time-To-Live starting at timestamp to be ttl. The ttl is the amount of time that this field-value pair should exist in the database, meaning it will be available during this interval: [timestamp, timestamp + ttl). This operation should return an empty string.\"}],[\"$\",\"li\",null,{\"children\":\"DELETE_AT \u003ckey\u003e \u003cfield\u003e \u003ctimestamp\u003e — the same as DELETE, but with timestamp of the operation specified. Should return \\\"true\\\" if the field existed and was successfully deleted and \\\"false\\\" if the key didn't exist.\"}],[\"$\",\"li\",null,{\"children\":\"GET_AT \u003ckey\u003e \u003cfield\u003e \u003ctimestamp\u003e — the same as GET, but with timestamp of the operation specified.\"}],[\"$\",\"li\",null,{\"children\":\"SCAN_AT \u003ckey\u003e \u003ctimestamp\u003e — the same as SCAN, but with timestamp of the operation specified.\"}],[\"$\",\"li\",null,{\"children\":\"SCAN_BY_PREFIX_AT \u003ckey\u003e \u003cprefix\u003e \u003ctimestamp\u003e — the same as SCAN_BY_PREFIX, but with timestamp of the operation specified.\"}]]}],[\"$\",\"h3\",null,{\"id\":\"examples-3\",\"children\":\"Examples\"}],[\"$\",\"p\",null,{\"children\":\"The examples below show how these operations should work\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Queries\\n\\nqueries = [ \\n[\\\"SET_AT_WITH_TTL\\\", \\\"A\\\", \\\"BC\\\", \\\"E\\\", \\\"1\\\", \\\"9\\\"], \\n[\\\"SET_AT_WITH_TTL\\\", \\\"A\\\", \\\"BC\\\", \\\"E\\\", \\\"5\\\", \\\"10\\\"], \\n[\\\"SET_AT\\\", \\\"A\\\", \\\"BD\\\", \\\"F\\\", \\\"5\\\"], \\n[\\\"SCAN_BY_PREFIX_AT\\\", \\\"A\\\", \\\"B\\\", \\\"14\\\"], \\n[\\\"SCAN_BY_PREFIX_AT\\\", \\\"A\\\", \\\"B\\\", \\\"15\\\"] \\n]\\n\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Explanations\\n\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"BC\\\": \\\"E\\\"}} \\nwhere {\\\"BC\\\": \\\"E\\\"} expires at timestamp 10 returns \\\"\\\"; database state: {\\\"A\\\": {\\\"BC\\\": \\\"E\\\"}} \\nas field \\\"BC\\\" in record \\\"A\\\" already \\nexists, it was overwritten, \\nand {\\\"BC\\\": \\\"E\\\"} now expires at timestamp 15 \\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"BC\\\": E\\\", \\\"BD\\\": \\\"F\\\"}} \\nwhere {\\\"BD\\\": \\\"F\\\"} does not expire \\nreturns \\\"BC(E), BD(F)\\\" \\nreturns \\\"BD(F)\\\"\\n\"}],[\"$\",\"p\",null,{\"children\":\"the output should be [\\\"\\\", \\\"\\\", \\\"\\\", \\\"BC(E), BD(F)\\\", \\\"BD(F)\\\"].\"}],[\"$\",\"h3\",null,{\"id\":\"example2\",\"children\":\"Example2\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Queries\\n\\nqueries = [ \\n[\\\"SET_AT\\\", \\\"A\\\", \\\"B\\\", \\\"C\\\", \\n\\\"1\\\"], \\n[\\\"SET_AT_WITH_TTL\\\", \\\"X\\\", \\n\\\"Y\\\", \\\"Z\\\", \\\"2\\\", \\\"15\\\"], \\n[\\\"GET_AT\\\", \\\"X\\\", \\\"Y\\\", \\\"3\\\"], [\\\"SET_AT_WITH_TTL\\\", \\\"A\\\", \\n\\\"D\\\", \\\"E\\\", \\\"4\\\", \\\"10\\\"], \\n[\\\"SCAN_AT\\\", \\\"A\\\", \\\"13\\\"], \\n[\\\"SCAN_AT\\\", \\\"X\\\", \\\"16\\\"], \\n[\\\"SCAN_AT\\\", \\\"X\\\", \\\"17\\\"], \\n[\\\"DELETE_AT\\\", \\\"X\\\", \\\"Y\\\", \\n\\\"20\\\"] \\n]\\n\\n\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Explanations\\n\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"B\\\": \\\"C\\\"}} returns \\\"\\\"; database state: {\\\"X\\\": {\\\"Y\\\": \\\"Z\\\"}, \\\"A\\\": {\\\"B\\\": \\\"C\\\"}} \\nwhere {\\\"Y\\\": \\\"Z\\\"} expires at timestamp 17 returns \\\"Z\\\" \\nreturns \\\"\\\"; database state: \\n{\\\"X\\\": {\\\"Y\\\": \\\"Z\\\"}, \\\"A\\\": {\\\"D\\\": \\\"E\\\", \\\"B\\\": \\\"C\\\"}} where {\\\"D\\\": \\\"E\\\"} expires at timestamp 14 and {\\\"Y\\\": \\\"Z\\\"} expires at timestamp 17 \\nreturns \\\"B(C), D(E)\\\" \\nreturns \\\"Y(Z)\\\" \\nreturns \\\"\\\"; Note that all fields in record \\\"X\\\" have expired \\nreturns \\\"false\\\"; the record \\\"X\\\" was expired at timestamp 17 and can't be deleted.\\n\\n\"}],[\"$\",\"p\",null,{\"children\":\"the output should be [\\\"\\\", \\\"\\\", \\\"Z\\\", \\\"\\\", \\\"B(C), D(E)\\\", \\\"Y(Z)\\\", \\\"\\\", \\\"false\\\"].\"}],[\"$\",\"h2\",null,{\"id\":\"level-4\",\"children\":\"Level 4\"}],[\"$\",\"p\",null,{\"children\":\"The database should be backed up from time to time. Introduce operations to support backing up and restoring the database state based on timestamps. When restoring, ttl expiration times should be recalculated accordingly.\"}],[\"$\",\"ul\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":[\"BACKUP \u003ctimestamp\u003e — should save the database state at the specified timestamp, including the remaining ttl for all records and fields. Remaining ttl is the difference between their initial ttl and their current lifespan (the duration between the timestamp of this operation\",\" \",\"and their initial timestamp). Returns a string representing the number of non-empty non-expired records in the database.\"]}],[\"$\",\"li\",null,{\"children\":\"RESTORE \u003ctimestamp\u003e \u003ctimestampToRestore\u003e — should restore the database from the latest backup before or at timestampToRestore. It's guaranteed that a backup before or at timestampToRestore will exist. Expiration times for restored records and fields should be recalculated according to the timestamp of this operation - since the database timeline always flows forward, restored records and fields should expire after the timestamp of this operation, depending on their remaining ttls at backup. This operation should return an empty string.\"}]]}],[\"$\",\"h3\",null,{\"id\":\"examples-4\",\"children\":\"Examples\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Queries\\n\\nqueries = [ \\n[\\\"SET_AT_WITH_TTL\\\", \\\"A\\\", \\\"B\\\", \\\"C\\\", \\\"1\\\", \\\"10\\\"], \\n[\\\"BACKUP\\\", \\\"3\\\"], \\n[\\\"SET_AT\\\", \\\"A\\\", \\\"D\\\", \\\"E\\\", \\\"4\\\"], \\n[\\\"BACKUP\\\", \\\"5\\\"], \\n[\\\"DELETE_AT\\\", \\\"A\\\", \\\"B\\\", \\n\\\"8\\\"], \\n[\\\"BACKUP\\\", \\\"9\\\"], \\n[\\\"RESTORE\\\", \\\"10\\\", \\\"7\\\"], \\n[\\\"BACKUP\\\", \\\"11\\\"], \\n[\\\"SCAN_AT\\\", \\\"A\\\", \\\"15\\\"], \\n[\\\"SCAN_AT\\\", \\\"A\\\", \\\"16\\\"] \\n]\\n\\n\"}],[\"$\",\"$L10\",null,{\"language\":\"js\",\"children\":\"Explanations\\n\\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"B\\\": \\\"C\\\"}} with lifespan `[1, 11)`, meaning that the record should be deleted at timestamp = 11. \\nreturns \\\"1\\\"; saves the database state \\nreturns \\\"\\\"; database state: {\\\"A\\\": {\\\"D\\\": \\\"E\\\", \\\"B\\\": \\\"C\\\"}} \\nreturns \\\"1\\\"; saves the database state \\nreturns \\\"true\\\"; database state: {\\\"A\\\": {\\\"D\\\": \\\"E\\\"}} returns \\\"1\\\"; saves the database state \\nreturns \\\"\\\"; restores the database to state of last backup at timestamp = 5: \\n{\\\"A\\\": {\\\"D\\\": \\\"E\\\", \\\"B\\\": \\\"C\\\"}} \\nwith {\\\"B\\\": \\\"C\\\"} expiring at timestamp = 16: Since the initial ttl of the field is 10 \\nand the database was restored to the state at timestamp = 5; this field has had \\na lifespan of 4 and a remaining ttl of 6, so it will now expire at timestamp = 10 + 6 = 16. returns \\\"1\\\"; saves the database state \\nreturns \\\"B(C), D(E)\\\" \\nreturns \\\"D(E)\\\"\\n\"}],[\"$\",\"p\",null,{\"children\":\"the output should be [\\\"\\\", \\\"1\\\", \\\"\\\", \\\"1\\\", \\\"true\\\", \\\"1\\\", \\\"\\\", \\\"1\\\", \\\"B(C), D(E)\\\", \\\"D(E)\\\"].\"}]]}]]}]}],[\"$\",\"$L11\",null,{\"tableOfContents\":[{\"level\":2,\"id\":\"requirements\",\"title\":\"Requirements\",\"children\":[]},{\"level\":2,\"id\":\"level-1\",\"title\":\"Level 1\",\"children\":[{\"level\":3,\"id\":\"examples\",\"title\":\"Examples\"}]},{\"level\":2,\"id\":\"level-2\",\"title\":\"Level 2\",\"children\":[{\"level\":3,\"id\":\"examples-2\",\"title\":\"Examples\"}]},{\"level\":2,\"id\":\"level-3\",\"title\":\"Level 3\",\"children\":[{\"level\":3,\"id\":\"examples-3\",\"title\":\"Examples\"},{\"level\":3,\"id\":\"example2\",\"title\":\"Example2\"}]},{\"level\":2,\"id\":\"level-4\",\"title\":\"Level 4\",\"children\":[{\"level\":3,\"id\":\"examples-4\",\"title\":\"Examples\"}]}]}]]\n"])</script><script type="text/javascript">self.__next_f.push([1,"6:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Anthropic Online Assessment -- In Memory Database - Docs\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Anthropic Online Assessment Question 2024 -- In Memory Database\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/iq/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\nd:null\n"])</script><next-route-announcer style="position: absolute;"><template shadowrootmode="open"><div aria-live="assertive" id="__next-route-announcer__" role="alert" style="position: absolute; border: 0px; height: 1px; margin: -1px; padding: 0px; width: 1px; clip: rect(0px, 0px, 0px, 0px); overflow: hidden; white-space: nowrap; overflow-wrap: normal;">Anthropic Online Assessment -- In Memory Database - Docs</div></template></next-route-announcer></body></html>